<!DOCTYPE html>
<html lang="es">
<head>
  <%- include('partials/head.ejs') %>
    <title>Ranking Individual</title>
</head>
<body>
   <%- include('partials/navigation.ejs') %>
  <section class="home-section">
    <div class="home-content">
      <i class='bx bx-menu' ></i>
      >>> Ranking Individual
    </div>
    <div class="container">
      <div class="row">
        <div class="">
          <a href="/crearRankingIndividual" class="btn btn-outline-primary fs-2 btn-block ml-auto"> Agregar <i class='bx bxs-plus-circle'></i></a> 
        </div> 
        <div class="col-xs-12 mt-3">
          <table class="table table-bordered table-striped text-center mt-4" id="miTabla">
            <thead>
              <tr class="bg-primary text-white">
                <th scope="col">#</th>
                <th scope="col">Nombre Jugador</th>
                <th scope="col">Carrera / Unidad</th>
                <th scope="col">Deporte</th>
                <th scope="col">Puntos</th>
                <th scope="col">Acciones</th>           
              </tr>
            </thead>
            <tbody>
              <% var count %>
              <% rankini.forEach((rankini)=>{ %>
                <tr>  
                  <td> </td>
                    <td><%= rankini.nombreJugador %></td>  
                    <td><%= rankini.nombreCarrera %></td>  
                    <td><%= rankini.nombreDeporte %></td>  
                    <td><%= rankini.puntos %></td>  
                    <td>
                        <a href="/editarRankingRI/<%= rankini.id %>" class="btn btn-outline-info"> <i
                            class='bx bxs-pencil fs-5'></i></a>
                     
                      <a onclick="confirmar('<%= rankini.id %>','deleteRI')" class="btn btn-outline-danger"><i class='bx bxs-trash'></i></a>
                    </td>
                </tr>                                   
             <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section> 

  <section class="home-section">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 mx-auto">
          <div id="mensajes">
  <p id="mensaje"></p>
  <img class="rounded" src="images/medioAmbiente.png" width="330" height="230">
</div>
        </div>
      </div>
    </div>
  </section>
  <%- include('partials/scripts.ejs') %>
  <script>
   $(document).ready(function() {
    if ($.fn.DataTable.isDataTable('#miTabla')) {
      $('#miTabla').DataTable().destroy();
}
  var tabla = $('#miTabla').DataTable({
    columnDefs: [{
      orderable: false,
      targets: 5 // deshabilitar ordenamiento en la columna "Acciones"
    }],
    order: [[ 4, "desc" ]], // ordenar por la columna "Puntos" de forma descendente
    createdRow: function(row, data, index) {
      // Agregar un número de fila que indica la posición original de cada registro
      $('td', row).eq(0).text(index + 1);
      
      // Agregar la posición de cada registro en la tabla
      var posicion;
      switch(index) {
        case 0:
          posicion = '1er lugar';
          break;
        case 1:
          posicion = '2do lugar';
          break;
        case 2:
          posicion = '3er lugar';
          break;
        default:
          posicion = (index + 1) + 'º lugar';
      }
      $('td', row).eq(6).text(posicion);
    }
  });
});


    // tabla.order([4, 'desc']).draw();
    
//Función para filtrar los valores
// function filterTable(value) {
//   tabla.search(value).draw();
// }
// receivedVariable = "tenis"
//Llamamos a la función y le pasamos la variable recibida
// filterTable(receivedVariable);
// fin de filtrar valores

// $('.dataTables_filter').hide(); // ocultar el buscador

 // ordernar tabla de forma descendente
  </script>
</body>
</html>